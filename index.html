<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARLAN MOTORWORKS ‚Äî –ü—Ä–µ–º–∏—É–º –∞–≤—Ç–æ—Å–µ—Ä–≤–∏—Å –≤ –ö—ã–∑—ã–ª-–ö–∏—è</title>
    
    <style>
        /* –í–°–ï –°–¢–ò–õ–ò –û–°–¢–ê–Æ–¢–°–Ø –¢–ê–ö–ò–ú–ò –ñ–ï –ö–ê–ö –í–´–®–ï */
        /* ... (–≤—Å—Ç–∞–≤—å—Ç–µ –≤—Å–µ —Å—Ç–∏–ª–∏ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –æ—Ç–≤–µ—Ç–∞) ... */
    </style>
</head>
<body>
    <!-- –í–°–Ø HTML-–†–ê–ó–ú–ï–¢–ö–ê –û–°–¢–ê–ï–¢–°–Ø –¢–ê–ö–û–ô –ñ–ï -->
    <!-- ... (–≤—Å—Ç–∞–≤—å—Ç–µ –≤—Å—é HTML-—Ä–∞–∑–º–µ—Ç–∫—É –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –æ—Ç–≤–µ—Ç–∞) ... -->

    <script>
        // =================== –ü–û–õ–ù–ê–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø –í–°–ï–• –§–£–ù–ö–¶–ò–ô ===================
        
        // 1. –ë–ê–ó–ê –î–ê–ù–ù–´–•
        const DB = {
            services: [
                {id: 1, name: "–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞", price: 0, icon: "üîç", duration: "1 —á–∞—Å", popular: true},
                {id: 2, name: "–ó–∞–º–µ–Ω–∞ –º–∞—Å–ª–∞", price: 1500, icon: "‚öôÔ∏è", duration: "1-2 —á–∞—Å–∞", popular: true},
                {id: 3, name: "–†–µ–º–æ–Ω—Ç —Ö–æ–¥–æ–≤–æ–π", price: 2500, icon: "üõû", duration: "3-4 —á–∞—Å–∞", popular: false},
                {id: 4, name: "–†–µ–º–æ–Ω—Ç –¥–≤–∏–≥–∞—Ç–µ–ª—è", price: 5000, icon: "üöó", duration: "1-2 –¥–Ω—è", popular: false},
                {id: 5, name: "–ö—É–∑–æ–≤–Ω—ã–µ —Ä–∞–±–æ—Ç—ã", price: 3000, icon: "üî®", duration: "2-3 –¥–Ω—è", popular: false},
                {id: 6, name: "–î–µ—Ç–µ–π–ª–∏–Ω–≥", price: 4000, icon: "‚ú®", duration: "1 –¥–µ–Ω—å", popular: true}
            ],
            
            prices: {
                '–î–≤–∏–≥–∞—Ç–µ–ª—å': { min: 3000, max: 25000 },
                '–•–æ–¥–æ–≤–∞—è —á–∞—Å—Ç—å': { min: 2500, max: 15000 },
                '–¢–û / –ú–∞—Å–ª–æ': { min: 1500, max: 8000 },
                '–ö—É–∑–æ–≤–Ω—ã–µ —Ä–∞–±–æ—Ç—ã': { min: 5000, max: 50000 },
                '–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞': { min: 0, max: 2500 },
                '–î–µ—Ç–µ–π–ª–∏–Ω–≥': { min: 3000, max: 20000 }
            },
            
            chatBot: {
                '—Ü–µ–Ω–∞': '–°—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –º–∞—Ä–∫–∏ –∞–≤—Ç–æ –∏ –æ–±—ä–µ–º–∞ —Ä–∞–±–æ—Ç. –ü—Ä–æ–π–¥–∏—Ç–µ –∫–≤–∏–∑ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞!',
                '–≤—Ä–µ–º—è': '–ú—ã —Ä–∞–±–æ—Ç–∞–µ–º —Å 9:00 –¥–æ 19:00, –ü–Ω-–°–±',
                '–∞–¥—Ä–µ—Å': '–ö—ã–∑—ã–ª-–ö–∏—è, —É–ª. –ö—É–¥–∞–π–±–µ—Ä–¥–∏–µ–≤–∞ –£–º—Å—É–Ω–∞–π, 3',
                '–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞': '–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ –æ–Ω–ª–∞–π–Ω!',
                '–≥–∞—Ä–∞–Ω—Ç–∏—è': '–ì–∞—Ä–∞–Ω—Ç–∏—è 12 –º–µ—Å—è—Ü–µ–≤ –Ω–∞ –≤—Å–µ —Ä–∞–±–æ—Ç—ã',
                '–∑–∞–ø—á–∞—Å—Ç–∏': '–†–∞–±–æ—Ç–∞–µ–º —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º–∏ –∏ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –∞–Ω–∞–ª–æ–≥–∞–º–∏'
            }
        };

        // 2. –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï
        let selectedService = '';
        let selectedDate = null;
        let selectedTime = null;
        let chatHistory = [];

        // 3. –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ü–†–ò –ó–ê–ì–†–£–ó–ö–ï
        document.addEventListener('DOMContentLoaded', function() {
            initServices();
            initCalendar();
            loadStats();
            startFreeSlotsCounter();
        });

        // 4. –°–ï–†–í–ò–°–´
        function initServices() {
            const container = document.getElementById('servicesList');
            container.innerHTML = DB.services.map(service => `
                <div class="service-card">
                    <div class="service-price">${service.price === 0 ? '–ë–ï–°–ü–õ–ê–¢–ù–û' : service.price + ' —Å–æ–º'}</div>
                    <h3>${service.icon} ${service.name}</h3>
                    <p>${service.description || '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç'}</p>
                    <p><small>‚è±Ô∏è ${service.duration}</small></p>
                    <button onclick="selectService('${service.name}')" class="btn btn-outline" style="margin-top: 15px;">
                        –í—ã–±—Ä–∞—Ç—å
                    </button>
                </div>
            `).join('');
        }

        // 5. –ö–ê–õ–ï–ù–î–ê–†–¨
        function initCalendar() {
            generateCalendar(new Date().getFullYear(), new Date().getMonth());
            generateTimeSlots();
        }

        function generateCalendar(year, month) {
            const container = document.getElementById('calendarDays');
            const date = new Date(year, month, 1);
            const monthNames = ["–Ø–Ω–≤–∞—Ä—å", "–§–µ–≤—Ä–∞–ª—å", "–ú–∞—Ä—Ç", "–ê–ø—Ä–µ–ª—å", "–ú–∞–π", "–ò—é–Ω—å",
                               "–ò—é–ª—å", "–ê–≤–≥—É—Å—Ç", "–°–µ–Ω—Ç—è–±—Ä—å", "–û–∫—Ç—è–±—Ä—å", "–ù–æ—è–±—Ä—å", "–î–µ–∫–∞–±—Ä—å"];
            
            document.getElementById('currentMonth').textContent = `${monthNames[month]} ${year}`;
            
            // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
            container.innerHTML = '';
            
            // –ü–µ—Ä–≤—ã–π –¥–µ–Ω—å –º–µ—Å—è—Ü–∞
            const firstDay = new Date(year, month, 1).getDay();
            const adjustedFirstDay = firstDay === 0 ? 6 : firstDay - 1;
            
            // –ü—É—Å—Ç—ã–µ —è—á–µ–π–∫–∏ –¥–æ –ø–µ—Ä–≤–æ–≥–æ –¥–Ω—è
            for (let i = 0; i < adjustedFirstDay; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'calendar-day disabled';
                container.appendChild(emptyDay);
            }
            
            // –î–Ω–∏ –º–µ—Å—è—Ü–∞
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const today = new Date();
            
            for (let day = 1; day <= daysInMonth; day++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                dayElement.textContent = day;
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å–µ–≥–æ–¥–Ω—è –ª–∏ —ç—Ç–æ
                if (year === today.getFullYear() && month === today.getMonth() && day === today.getDate()) {
                    dayElement.classList.add('today');
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø—Ä–æ—à–µ–¥—à–∞—è –ª–∏ –¥–∞—Ç–∞
                const currentDate = new Date(year, month, day);
                if (currentDate < today) {
                    dayElement.classList.add('disabled');
                } else {
                    dayElement.onclick = () => selectDate(year, month, day);
                }
                
                container.appendChild(dayElement);
            }
        }

        function selectDate(year, month, day) {
            selectedDate = new Date(year, month, day);
            
            // –£–±–∏—Ä–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —É –≤—Å–µ—Ö –¥–Ω–µ–π
            document.querySelectorAll('.calendar-day').forEach(el => {
                el.classList.remove('selected');
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É –¥–Ω—é
            event.target.classList.add('selected');
            
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª–æ—Ç—ã –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –¥–∞—Ç—ã
            generateTimeSlots();
        }

        function generateTimeSlots() {
            const container = document.getElementById('timeSlots');
            const slots = ['9:00', '10:30', '12:00', '13:30', '15:00', '16:30', '18:00'];
            
            container.innerHTML = slots.map(time => `
                <div class="time-slot" onclick="selectTime('${time}')">${time}</div>
            `).join('');
        }

        function selectTime(time) {
            selectedTime = time;
            
            // –£–±–∏—Ä–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —É –≤—Å–µ—Ö —Å–ª–æ—Ç–æ–≤
            document.querySelectorAll('.time-slot').forEach(el => {
                el.classList.remove('selected');
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —Å–ª–æ—Ç—É
            event.target.classList.add('selected');
        }

        function showBookingCalendar() {
            document.getElementById('bookingCalendar').style.display = 'block';
            document.getElementById('booking').scrollIntoView({ behavior: 'smooth' });
        }

        function confirmBooking() {
            if (!selectedDate || !selectedTime) {
                showNotification('–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è!', 'error');
                return;
            }
            
            const dateStr = selectedDate.toLocaleDateString('ru-RU');
            const message = `üìÖ –ù–æ–≤–∞—è –∑–∞–ø–∏—Å—å:\n\n–î–∞—Ç–∞: ${dateStr}\n–í—Ä–µ–º—è: ${selectedTime}\n–£—Å–ª—É–≥–∞: ${selectedService || '–ù–µ –≤—ã–±—Ä–∞–Ω–∞'}\n\n–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –∑–∞–ø–∏—Å—å.`;
            
            sendToWhatsApp(message);
        }

        // 6. –ö–í–ò–ó
        function selectService(service) {
            selectedService = service;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å
            document.getElementById('step1Progress').classList.remove('active');
            document.getElementById('step2Progress').classList.add('active');
            
            // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —à–∞–≥—É 2
            document.getElementById('step1').classList.add('hidden');
            document.getElementById('step2').classList.remove('hidden');
            
            trackEvent('service_selected', { service });
        }

        function calculatePrice() {
            const carBrand = document.getElementById('carBrand').value.trim();
            if (!carBrand) {
                showNotification('–í–≤–µ–¥–∏—Ç–µ –º–∞—Ä–∫—É –∞–≤—Ç–æ–º–æ–±–∏–ª—è', 'error');
                return;
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
            document.getElementById('calculateText').classList.add('hidden');
            document.getElementById('calculateLoading').classList.remove('hidden');
            
            // –ò–º–∏—Ç–∞—Ü–∏—è —Ä–∞—Å—á–µ—Ç–∞
            setTimeout(() => {
                const priceInfo = DB.prices[selectedService] || { min: 1000, max: 10000 };
                const randomPrice = Math.floor(Math.random() * (priceInfo.max - priceInfo.min)) + priceInfo.min;
                
                document.getElementById('estimatedPrice').textContent = randomPrice.toLocaleString();
                
                // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É
                document.getElementById('step2Progress').classList.remove('active');
                document.getElementById('step3Progress').classList.add('active');
                document.getElementById('step2').classList.add('hidden');
                document.getElementById('step3').classList.remove('hidden');
                
                // –°–∫—Ä—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
                document.getElementById('calculateText').classList.remove('hidden');
                document.getElementById('calculateLoading').classList.add('hidden');
                
                trackEvent('price_calculated', { service: selectedService, carBrand, price: randomPrice });
            }, 1500);
        }

        function bookWithDiscount() {
            const carBrand = document.getElementById('carBrand').value.trim();
            const price = document.getElementById('estimatedPrice').textContent;
            
            const message = `üéØ –ó–∞–ø–∏—Å—å —Å–æ —Å–∫–∏–¥–∫–æ–π!\n\n–£—Å–ª—É–≥–∞: ${selectedService}\n–ê–≤—Ç–æ: ${carBrand}\n–†–∞—Å—á–µ—Ç–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: ${price} —Å–æ–º\n–ü—Ä–æ–º–æ–∫–æ–¥: ARLANFREE\n\n–•–æ—á—É –∑–∞–ø–∏—Å–∞—Ç—å—Å—è!`;
            
            sendToWhatsApp(message);
        }

        function goBackToStep1() {
            document.getElementById('step2Progress').classList.remove('active');
            document.getElementById('step1Progress').classList.add('active');
            document.getElementById('step2').classList.add('hidden');
            document.getElementById('step1').classList.remove('hidden');
        }

        function startNewCalculation() {
            selectedService = '';
            document.getElementById('carBrand').value = '';
            
            document.getElementById('step3Progress').classList.remove('active');
            document.getElementById('step1Progress').classList.add('active');
            document.getElementById('step3').classList.add('hidden');
            document.getElementById('step1').classList.remove('hidden');
        }

        // 7. –û–¢–°–õ–ï–ñ–ò–í–ê–ù–ò–ï
        function checkRepairStatus() {
            const trackingNumber = document.getElementById('trackingNumber').value.trim();
            
            if (!trackingNumber) {
                showNotification('–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞ –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω', 'error');
                return;
            }
            
            // –ò–º–∏—Ç–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏
            document.getElementById('statusDisplay').classList.remove('hidden');
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
            const steps = document.querySelectorAll('.status-step');
            steps.forEach((step, index) => {
                setTimeout(() => {
                    step.classList.add('active');
                    if (index > 0) {
                        steps[index - 1].classList.add('completed');
                        steps[index - 1].classList.remove('active');
                    }
                }, index * 1000);
            });
            
            trackEvent('repair_status_checked', { trackingNumber });
        }

        // 8. –ë–ê–ó–ê –ó–ù–ê–ù–ò–ô
        function searchProblems() {
            const query = document.getElementById('problemSearch').value.toLowerCase();
            const container = document.getElementById('problemsList');
            
            // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –±—ã–ª –±—ã –ø–æ–∏—Å–∫ –ø–æ –±–∞–∑–µ)
            const problems = [
                {title: "–°—Ç—É–∫ –≤ –ø–æ–¥–≤–µ—Å–∫–µ", desc: "–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã: —à–∞—Ä–æ–≤—ã–µ –æ–ø–æ—Ä—ã, —Å–∞–π–ª–µ–Ω—Ç–±–ª–æ–∫–∏"},
                {title: "–¢–µ—á–µ—Ç –º–∞—Å–ª–æ", desc: "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∞–ª—å–Ω–∏–∫–∏, –ø—Ä–æ–∫–ª–∞–¥–∫–∏, –ø–æ–¥–¥–æ–Ω –∫–∞—Ä—Ç–µ—Ä–∞"},
                {title: "–ù–µ –≥—Ä–µ–µ—Ç –ø–µ—á–∫–∞", desc: "–ü—Ä–æ–±–ª–µ–º—ã —Å —Ç–µ—Ä–º–æ—Å—Ç–∞—Ç–æ–º, —Ä–∞–¥–∏–∞—Ç–æ—Ä–æ–º –ø–µ—á–∫–∏"}
            ];
            
            const filtered = problems.filter(p => 
                p.title.toLowerCase().includes(query) || 
                p.desc.toLowerCase().includes(query)
            );
            
            container.innerHTML = filtered.map(p => `
                <div class="problem-item" onclick="showProblemDetail('${p.title}')">
                    <h4>üîß ${p.title}</h4>
                    <p>${p.desc}</p>
                    <button class="btn btn-outline btn-small" style="margin-top: 10px;">
                        –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                    </button>
                </div>
            `).join('');
            
            if (filtered.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #aaa;">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –∑–∞–ø—Ä–æ—Å.</p>';
            }
        }

        // 9. –ß–ê–¢-–ë–û–¢
        function toggleChat() {
            const chat = document.getElementById('chatWidget');
            chat.classList.toggle('open');
            
            if (chat.classList.contains('open')) {
                initChat();
            }
        }

        function initChat() {
            const container = document.getElementById('chatMessages');
            if (container.children.length === 0) {
                container.innerHTML = `
                    <div class="message bot">
                        –ü—Ä–∏–≤–µ—Ç! –Ø –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ ARLAN MOTORWORKS. 
                        –°–ø—Ä–æ—Å–∏—Ç–µ –º–µ–Ω—è –æ —Ü–µ–Ω–∞—Ö, –∑–∞–ø–∏—Å–∏ –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –∞–≤—Ç–æ!
                    </div>
                `;
            }
        }

        function sendChatMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            addMessage(message, 'user');
            input.value = '';
            
            // –ò–º–∏—Ç–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ –±–æ—Ç–∞
            setTimeout(() => {
                const response = getBotResponse(message);
                addMessage(response, 'bot');
            }, 1000);
        }

        function getBotResponse(message) {
            const lowerMsg = message.toLowerCase();
            
            for (const [keyword, response] of Object.entries(DB.chatBot)) {
                if (lowerMsg.includes(keyword)) {
                    return response;
                }
            }
            
            return '–Ø –Ω–µ —Å–æ–≤—Å–µ–º –ø–æ–Ω—è–ª –≤–æ–ø—Ä–æ—Å. –ü–æ–∑–≤–æ–Ω–∏—Ç–µ –Ω–∞–º: +996 505 511 125';
        }

        function addMessage(text, sender) {
            const container = document.getElementById('chatMessages');
            const message = document.createElement('div');
            message.className = `message ${sender}`;
            message.textContent = text;
            container.appendChild(message);
            container.scrollTop = container.scrollHeight;
        }

        // 10. –£–¢–ò–õ–ò–¢–´
        function showNotification(text, type = 'info') {
            const notification = document.getElementById('notification');
            notification.textContent = text;
            notification.className = `notification ${type} show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        function copyCouponCode() {
            const code = 'ARLANFREE';
            navigator.clipboard.writeText(code).then(() => {
                showNotification('–ö–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!', 'success');
            });
        }

        function sendToWhatsApp(message) {
            const phone = '996505511125';
            const encoded = encodeURIComponent(message);
            window.open(`https://wa.me/${phone}?text=${encoded}`, '_blank');
        }

        function sendContactForm() {
            const name = document.getElementById('contactName').value.trim();
            const phone = document.getElementById('contactPhone').value.trim();
            const car = document.getElementById('contactCar').value.trim();
            const problem = document.getElementById('contactProblem').value.trim();
            
            if (!name || !phone) {
                showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–º—è –∏ —Ç–µ–ª–µ—Ñ–æ–Ω', 'error');
                return;
            }
            
            const message = `üìã –ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞:\n\n–ò–º—è: ${name}\n–¢–µ–ª–µ—Ñ–æ–Ω: ${phone}\n–ê–≤—Ç–æ: ${car}\n–ü—Ä–æ–±–ª–µ–º–∞: ${problem}\n\n–ü–µ—Ä–µ–∑–≤–æ–Ω–∏—Ç–µ –º–Ω–µ!`;
            
            sendToWhatsApp(message);
        }

        function toggleMenu() {
            document.getElementById('navButtons').classList.toggle('show');
        }

        // 11. –°–ß–ï–¢–ß–ò–ö–ò –ò –°–¢–ê–¢–ò–°–¢–ò–ö–ê
        function startFreeSlotsCounter() {
            // –ò–º–∏—Ç–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–≤–æ–±–æ–¥–Ω—ã—Ö –æ–∫–æ–Ω
            setInterval(() => {
                const slots = document.getElementById('freeSlots');
                const current = parseInt(slots.textContent);
                const newCount = Math.max(1, Math.min(5, current + (Math.random() > 0.5 ? 1 : -1)));
                slots.textContent = newCount;
                
                if (newCount <= 2) {
                    document.querySelector('.urgency-banner').style.background = 'linear-gradient(90deg, #ff6b6b, #ff8e8e)';
                }
            }, 30000);
        }

        function loadStats() {
            // –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏–∑ localStorage
            const stats = JSON.parse(localStorage.getItem('arlan_stats') || '{}');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –ø–æ—Å–µ—â–µ–Ω–∏–π
            if (!stats.visits) stats.visits = 0;
            stats.visits++;
            localStorage.setItem('arlan_stats', JSON.stringify(stats));
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
            if (stats.visits > 3) {
                showNotification(`–° –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º! –£ –≤–∞—Å –µ—Å—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è —Å–∫–∏–¥–∫–∞`, 'success');
            }
        }

        function trackEvent(event, data) {
            console.log(`üìä ${event}:`, data);
            // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å Google Analytics –∏–ª–∏ –¥—Ä—É–≥—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É
        }

        // 12. PWA –§–£–ù–ö–¶–ò–ò
        let deferredPrompt;
        
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                if (deferredPrompt) {
                    document.getElementById('installPrompt').classList.add('show');
                }
            }, 10000);
        });

        function installPWA() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        showNotification('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ!', 'success');
                    }
                    deferredPrompt = null;
                    document.getElementById('installPrompt').classList.remove('show');
                });
            }
        }

        function hideInstallPrompt() {
            document.getElementById('installPrompt').classList.remove('show');
        }

        // 13. –ê–î–ê–ü–¢–ò–í–ù–´–ï –§–£–ù–ö–¶–ò–ò
        window.addEventListener('scroll', () => {
            const header = document.getElementById('mainHeader');
            if (window.scrollY > 50) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        });

        // –ú–∞—Å–∫–∞ –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞
        document.getElementById('contactPhone').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            
            if (value.startsWith('996')) {
                value = value.substring(3);
            }
            
            value = value.substring(0, 9);
            
            if (value.length > 0) {
                const groups = value.match(/.{1,3}/g);
                e.target.value = '+996 ' + groups.join(' ');
            } else {
                e.target.value = '+996 ';
            }
        });

        // –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });

        // 14. –ü–†–û–ì–†–ï–°–° –õ–û–Ø–õ–¨–ù–û–°–¢–ò
        function updateLoyaltyProgress() {
            const progress = localStorage.getItem('arlan_loyalty') || 0;
            const bar = document.getElementById('loyaltyProgress');
            bar.style.width = `${Math.min(100, progress * 33)}%`;
        }

        function shareReferral() {
            const link = `${window.location.origin}?ref=${btoa('arlan_referral')}`;
            navigator.clipboard.writeText(link).then(() => {
                showNotification('–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!', 'success');
            });
        }

        // 15. –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –ö–õ–ê–í–ò–®
        document.addEventListener('keydown', (e) => {
            // ESC –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —á–∞—Ç
            if (e.key === 'Escape') {
                document.getElementById('chatWidget').classList.remove('open');
            }
            
            // Ctrl+K –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–∏—Å–∫ –ø—Ä–æ–±–ª–µ–º
            if (e.ctrlKey && e.key === 'k') {
                e.preventDefault();
                document.getElementById('problemSearch').focus();
            }
        });

        // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ü–†–ò –ó–ê–ì–†–£–ó–ö–ï
        console.log('üöó ARLAN MOTORWORKS –∑–∞–≥—Ä—É–∂–µ–Ω!');
        showNotification('–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ ARLAN MOTORWORKS!', 'success', 2000);
    </script>
</body>
</html>